<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lal Kitab Chart</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            background-color: #f1b78d;
        }

        .main {
            border: 2px solid #000;
            margin: auto;
            overflow: hidden;
            background-color: bisque;
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            width: 450px;
            height: 450px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .sub {
            width: 70%;
            height: 70%;
            border: 2px solid #000;
            transform: rotate(45deg);
            background-color: bisque;
            position: absolute;
        }

        .line1,
        .line2 {
            position: absolute;
            width: 150%;
            border-bottom: 2px solid #000;
            top: 50%;
            left: 50%;
        }

        .line1 {
            transform: translate(-50%, -50%) rotate(135deg);
        }

        .line2 {
            transform: translate(-50%, -50%) rotate(-135deg);
        }

        p {
            margin: 0;
            position: absolute;
            font-size: 1rem;
            text-align: center;
            word-wrap: break-word;
            max-width: 60px;
        }

        .p1 {
            top: 28%;
            left: 43%;
        }

        .p2 {
            top: 0%;
            left: 18%;
        }

        .p3 {
            top: 20%;
            left: 18%;
        }

        .p4 {
            top: 45%;
            left: 42%;
        }

        .p5 {
            top: 69%;
            left: 18%;
        }

        .p6 {
            top: 75%;
            left: 25%;
        }

        .p7 {
            top: 50%;
            left: 50%;
        }

        .p8 {
            top: 75%;
            left: 74%;
        }

        .p9 {
            top: 68%;
            left: 80%;
        }

        .p10 {
            top: 44%;
            left: 55%;
        }

        .p11 {
            top: 19%;
            left: 79%;
        }

        .p12 {
            top: 13%;
            left: 73%;
        }

        @media (max-width: 400px) {
            .main {
                width: 100vw;
                height: 100vw;
            }

            .p1,
            .p2,
            .p3,
            .p4,
            .p5,
            .p6,
            .p7,
            .p8,
            .p9,
            .p10,
            .p11,
            .p12 {
                font-size: 0.8rem;
                max-width: 100px;
            }
        }

        table {
            width: 50%;
            height: 50%;
            margin-top: 10%;
            border-collapse: collapse;
            text-align: center;
        }

        th,
        td {
            border: 1px solid #000;
            padding: 8px;
        }

        th {
            background-color: #f1b78d;
        }

        .grouped-row td {
            border-top: none;
        }
    </style>
</head>

<body>
<div class="main">
    <div class="sub"></div>
    <div class="line1"></div>
    <div class="line2"></div>

    <p class="p1" data-position="1"></p>
    <p class="p2" data-position="2"></p>
    <p class="p3" data-position="3"></p>
    <p class="p4" data-position="4"></p>
    <p class="p5" data-position="5"></p>
    <p class="p6" data-position="6"></p>
    <p class="p7" data-position="7"></p>
    <p class="p8" data-position="8"></p>
    <p class="p9" data-position="9"></p>
    <p class="p10" data-position="10"></p>
    <p class="p11" data-position="11"></p>
    <p class="p12" data-position="12"></p>
</div>

<table>
    <thead>
    <tr>
        <th>House</th>
        <th>Grahas</th>
        <th>Drashti</th>
        <th>Baham Madad</th>
        <th>Aam Halat</th>
        <th>Takrav</th>
        <th>Buniyadi</th>
        <th>Dhoka</th>
        <th>Mushtarka Divar</th>
    </tr>
    </thead>
    <tbody id="table-body">

    </tbody>
</table>
<script>
    const planetAbbreviations = {
        "Sun": "Su",
        "Moon": "Mo",
        "Mars": "Ma",
        "Mercury": "Me",
        "Jupiter": "Ju",
        "Venus": "Ve",
        "Saturn": "Sa",
        "Rahu": "Ra",
        "Ketu": "Ke"
    };

    function getPlanetsForHouse(houseNumber, data) {
        const house = data.find(item => item.id === houseNumber);
        return house ? house.planets.map(planet => planetAbbreviations[planet] || planet).join(', ') : "-";
    }

    const houseData = [
        [1, "A", 5, 7, 8, 9, 10, 2],
        [1, "B", 9, 7, 6, 5, 4, 12],
        [2, "A", 6, 8, 9, 10, 11, 3],
        [2, "B", 10, 8, 7, 6, 5, 1],
        [3, "A", 7, 9, 10, 11, 12, 4],
        [3, "B", 11, 9, 8, 7, 6, 2],
        [4, "A", 8, 10, 11, 12, 1, 5],
        [4, "B", 12, 10, 9, 8, 6, 3],
        [5, "A", 9, 11, 12, 1, 2, 6],
        [5, "B", 1, 11, 9, 6, 7, 4],
        [6, "A", 10, 12, 1, 2, 3, 7],
        [6, "B", 2, 12, 11, 10, 9, 5],
        [7, "A", 11, 1, 2, 3, 4, 8],
        [7, "B", 3, 1, 12, 11, 10, 4],
        [8, "A", 12, 2, 3, 4, 5, 9],
        [8, "B", 4, 2, 1, 12, 11, 7],
        [9, "A", 1, 3, 4, 5, 6, 10],
        [9, "B", 5, 3, 2, 1, 12, 8],
        [10, "A", 2, 4, 5, 6, 7, 1],
        [10, "B", 6, 4, 3, 2, 1, 7],
        [11, "A", 3, 5, 6, 7, 8, 12],
        [11, "B", 7, 5, 4, 3, 2, 10],
        [12, "A", 4, 6, 7, 8, 9, 1],
        [12, "B", 8, 6, 5, 4, 3, 11]
    ];

    async function fetchLalKitabData() {
        try {
            const response = await fetch('/lalkitab/');
            const data = await response.json();
            populateChart(data);
        } catch (error) {
            console.error('Error fetching Lal Kitab data:', error);
        }
    }

    function populateChart(data) {
        const tableBody = document.getElementById("table-body");

        data.forEach(item => {
            const houseEntryA = houseData.find(entry => entry[0] === item.id && entry[1] === "A");
            const houseEntryB = houseData.find(entry => entry[0] === item.id && entry[1] === "B");

            const row1 = document.createElement("tr");

            const houseCell1 = document.createElement("td");
            houseCell1.rowSpan = 2;
            houseCell1.textContent = item.id;
            row1.appendChild(houseCell1);

            const grahasCell1 = document.createElement("td");
            grahasCell1.rowSpan = 2;
            grahasCell1.textContent = item.planets.map(planet => planetAbbreviations[planet] || planet).join(', ');
            row1.appendChild(grahasCell1);

            const drashtiCell1 = document.createElement("td");
            drashtiCell1.textContent = "A";
            row1.appendChild(drashtiCell1);

            houseEntryA.slice(2).forEach(value => {
                const cell = document.createElement("td");
                cell.textContent = getPlanetsForHouse(value, data);
                row1.appendChild(cell);
            });

            tableBody.appendChild(row1);

            const row2 = document.createElement("tr");

            const drashtiCell2 = document.createElement("td");
            drashtiCell2.textContent = "B";
            row2.appendChild(drashtiCell2);

            houseEntryB.slice(2).forEach(value => {
                const cell = document.createElement("td");
                cell.textContent = getPlanetsForHouse(value, data);
                row2.appendChild(cell);
            });

            tableBody.appendChild(row2);

            const cell = document.querySelector(`[data-position='${item.id}']`);
            if (cell) {
                cell.innerHTML = `${item.planets.join(', ')}<br>${item.id}`;
            }
        });
    }

    fetchLalKitabData();

</script>


</body>

</html>